## HTTP 的工作过程

**一次HTTP操作**称为一个**事物**，其工作过程可分为四步：

1. **首先客户机与服务器需要建立链家**(*三次握手*)。只要单击某个擦好几链接，HTTP的工作开始。
2. .建立连接后，**客户机发送一个请求给服务器**，请求方式的格式为：统一资源标识符（URL）、协议版本号，后边是MIME 信息包含请求修饰符、客户机信息和可能的内容
3. **服务器接收到请求后**，**给予响应的响应信息**，**其格式为一个状态行，包含信息的协议版本号、一个成功或错误的代码**，后边是MIME信息包括服务器信息、实体信息和可能的内容。
4. **客户端接受**到服务器所返回的信息通过浏览器显示在用户的显示屏上，然后**客户机与服务器断开连接**（*四次挥手*）。

如果上述过程某一步出现错误，那么产生的错误信息将返回到客户端，有显示屏输出。对于用户来说，这些过程是由HTTP自己完成的。



*连接数受到电脑系统、内存空间等的限制。连接完成后断开连接*

### 请求和响应



### HTTP状态码

状态码由三位数字组成，第一个数字定义了响应的类别，且有五种可能性：

- 1xx: 指示信息--表示请求已接收，继续处理
- 2xx: 成功 -- 表示请求已经被成功接收，理解，接受
- 3xx: 重定向--要完成请求必须进行更进一步的操作
- 4xx: 客户端错误--请求有语法错误或请求无法实现
- 5xx:服务端错误--服务器未能实现合法的请求

#### TCP是怎样建立、断开连接的？

​	在建立连接之前，客户端和服务器之间会发送三次数据，以确认双方接受和发送能力，这个过程称为**三次握手（Three-way handshake）**。

​	**第一次握手：**刚开始客户端处理CLOSED状态，服务端处于LISTEN状态。客户端给服务端发送一个SYN报文，并指明客户端的初始化序列号ISN,此时客户端处于SYN_SEND状态。

​	**第二次握手：**当服务器接收到客户端的SYN报文之后，会以自己的SYN报文作为应答，并且也指定了自己的初始化序列号ISN.同时会把客户端的ISN+1 作为ACK的值，表示自己已经接受到了客户端的SYN,此时服务器处于SYN_REVD的状态。

​	**第三次握手：**当客户端收到SYN报文之后，会发送一个ACK报文，当然，也同样把服务器的ISN+1 作为ACK的值，表示已经接受到服务的SYN报文，此时客户端处于ESTABLISHED状态。服务器接受到ACK报文之后，也处于ESTABLISHED状态，此时，双方成功建立起了连接。

**为什么建立连接的时候需要三次握手？**

​	第一次握手让服务端知道客户端具有发送能力，第二次握手让客户端知道服务器具有接受和发送能力，但此时服务器还不知道客户端是否具有接受自己的发送的消息，所以进行了第三次握手。三次通信后，服务端和客户端都确认了双方的接受和发送能力。

**四次挥手**

当客户端和服务器断开连接时要发送四次数据，这个过程称为**四次挥手**

1. 在挥手之前服务器与客户端都处于ESTABLISHED状态，客户端发送一个FIN报文，用来关闭客户端到服务器的数据传输，此时客户端处于FIN_WAIT_1状态。
2. 当服务器接受到FIN之后，会发送ACK报文，并且把客户端的序列号值加1作为ACK报文的序列号值，表明接受到客户端的报文了，此时服务器处于CLOSE_WAIT状态。
3. 如果服务器同一关闭连接，则会向客户端发送一个FIN报文，并且指定一个序列号。此时服务器处于LAST_ACK的状态。
4. 当客户端接受到ACK之后，处于FIN_WAIT_2状态。接受到FIN报文时发送一个ACK报文作为应答，并且把服务器的序列号值+1作为自己的ACK报文的序列号值，此时客户端处于TIME_WAIT状态。等待一段时间后会进入CLOSED状态，当服务器接受到ACK报文之后，也会变为CLOSED状态，此时连接正式关闭。







